import { assertType, describe, expect, test } from 'vitest'

import { anvilMainnet } from '../../../test/src/anvil.js'
import { celo } from '../../chains/index.js'

import { createPublicClient } from '../../clients/createPublicClient.js'
import { http } from '../../clients/transports/http.js'
import type { Block } from '../../types/block.js'
import { getBlock } from './getBlock.js'

const client = anvilMainnet.getClient()

test('gets latest block', async () => {
  const block = await getBlock(client)
  assertType<Block>(block)
  expect(block).toBeDefined()
  expect(Object.keys(block!)).toMatchInlineSnapshot(`
    [
      "hash",
      "parentHash",
      "sha3Uncles",
      "miner",
      "stateRoot",
      "transactionsRoot",
      "receiptsRoot",
      "logsBloom",
      "difficulty",
      "number",
      "gasLimit",
      "gasUsed",
      "timestamp",
      "extraData",
      "mixHash",
      "nonce",
      "baseFeePerGas",
      "withdrawalsRoot",
      "blobGasUsed",
      "excessBlobGas",
      "parentBeaconBlockRoot",
      "size",
      "uncles",
      "transactions",
      "withdrawals",
      "totalDifficulty",
    ]
  `)
})

test('chain w/ custom block type', async () => {
  const client = createPublicClient({
    chain: celo,
    transport: http(),
  })
  const block = await getBlock(client, {
    blockNumber: 16645775n,
    includeTransactions: true,
  })

  const { extraData: _extraData, transactions, ...rest } = block
  expect(transactions[0]).toMatchInlineSnapshot(`
    {
      "blockHash": "0xac8c9bc3b84e103dc321bbe83b670e425ff68bfc9a333a4f1b1b204ad11c583d",
      "blockNumber": 16645775n,
      "chainId": 42220,
      "ethCompatible": false,
      "feeCurrency": undefined,
      "from": "0x045d685d23e8aa34dc408a66fb408f20dc84d785",
      "gas": 1527520n,
      "gasPrice": 562129081n,
      "gatewayFee": 0n,
      "gatewayFeeRecipient": undefined,
      "hash": "0x487efb864b308ee85afd7ed5954e968457cfe84e71726114b0a44f31fb876e85",
      "input": "0x389ec778",
      "nonce": 714820,
      "r": "0x1c0c8776e2e9d97b9a95435d2c2439d5f634e1afc35a5a0f0bd02093dd4724e0",
      "s": "0xde418ff749f2430a85e60a4b3f81af9f8e2117cffbe32c719b9b784c01be774",
      "to": "0xb86d682b1b6bf20d8d54f55c48f848b9487dec37",
      "transactionIndex": 0,
      "type": "legacy",
      "typeHex": "0x0",
      "v": 84476n,
      "value": 0n,
    }
  `)
  expect(rest).toMatchInlineSnapshot(`
    {
      "baseFeePerGas": 100000000n,
      "blobGasUsed": undefined,
      "difficulty": 0n,
      "excessBlobGas": undefined,
      "gasLimit": 20000000n,
      "gasUsed": 5045322n,
      "hash": "0xac8c9bc3b84e103dc321bbe83b670e425ff68bfc9a333a4f1b1b204ad11c583d",
      "logsBloom": "0x02004000004200000000000000800020000000000000400002040000002020000000802000000000000180000001000020800000000000000000000000000000000000000022000260000008000800000000000000000000000000000000000000000008000410002100000140000800000044c00200000000400010000800008800000080000000000010000040000000000000000000000000000000800020028000000100000000000000000000002002881000000000000800020000040020900402020000180000000000000040000800000011020090002000400000200010002000001000000000000080000000000000000000000000000004000000",
      "miner": "0xe267d978037b89db06c6a5fcf82fad8297e290ff",
      "mixHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
      "nonce": "0x0000000000000000",
      "number": 16645775n,
      "parentHash": "0xf6e57c99be5a81167bcb7bdf8d55572235384182c71635857ace2c04d25294ed",
      "receiptsRoot": "0xca8aabc507534e45c982aa43e38118fc6f9cf222800e3d703a6e299a2e661f2a",
      "sha3Uncles": "0x0000000000000000000000000000000000000000000000000000000000000000",
      "size": 24429n,
      "stateRoot": "0x051c8e40ed3d8afabbad5321a4bb6b9d686a8a62d9b696b3e5a5c769c3623d48",
      "timestamp": 1670896907n,
      "totalDifficulty": 16645776n,
      "transactionsRoot": "0xb293e2c4ce20a9eac253241e750a5592c9d3c1b27bf090d0fc2fa4756a038866",
      "uncles": [],
    }
  `)
})

describe('args: blockNumber', () => {
  test('gets block by block number', async () => {
    const block = await getBlock(client, {
      blockNumber: anvilMainnet.forkBlockNumber - 1n,
    })
    expect(block).toMatchInlineSnapshot(`
      {
        "baseFeePerGas": 556703106n,
        "blobGasUsed": 524288n,
        "difficulty": 0n,
        "excessBlobGas": 0n,
        "extraData": "0x6265617665726275696c642e6f7267",
        "gasLimit": 36000000n,
        "gasUsed": 23718021n,
        "hash": "0x0c594782f0363fc69f546a34c6dfd2d51aca62a6348dd2432243eb9c65b8c14a",
        "logsBloom": "0xfeab77f9ebbff3ffdedceefebffbf67fefffbde77ffbfffffffdff57fff2ffe3ff73ff7f3ff97fefdfdefffeeffeaf9bef7ffafddffefff57ff5777f5f6fbf5fffb7f7efd677fbfffadfffbfffebdafeffa4fffffdffbbffff771d76bdff7fff7f735fbdfbe3f9f7f754fdf9ee753ebdbffe2ddeffb76cfdbf6b7ffe8bffb7fffffcbffbdfffdbafeffdffebbffeefffffdfdfe7ffffdedfffb3ffdf9bf9eebebf7daffbffbf7fef7fbe5ffdbdffdcddfefdffbbfbfee6efedefaffb2fbdcbffbbfffdfa7dffaffbbffccff7fdffdbfeffff2fefbfef14f8ffff79ff2cfcebffeff7bfffff2fddffdffdbbf8f9b6fbf6dfffdf7fdbfdfeeeffdfbffe6f6fffef",
        "miner": "0x95222290dd7278aa3ddd389cc1e1d165cc4bafe5",
        "mixHash": "0xf073d9b5001b6101d889fb36b48ffd6fc4917273e13dc145baaedf8037b0e06e",
        "nonce": "0x0000000000000000",
        "number": 22180096n,
        "parentBeaconBlockRoot": "0xca1d53a0c315d2a56d441b61eb4954f889ad633128ac6ac428dcc7301b689f99",
        "parentHash": "0x52d48f5fcc8cc64b880d1c60ca30450c34c7f2921ed3ea81f736a7b3623e3763",
        "receiptsRoot": "0x4f11ed7dfb80e2b440c75a952457edc28aea2364afad8a51d717a7ef4b808116",
        "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
        "size": 157292n,
        "stateRoot": "0xcd41dd77206a202ec059270685c6119a80bdfd43dc2b3f34876733589abba3e8",
        "timestamp": 1743583271n,
        "totalDifficulty": null,
        "transactions": [
          "0xad83b46708d9640b8189282c107629e0c78640a5cc4d1f4bd23de671cd3a9e1e",
          "0x69ddbf53482ed9eb3fad596829e45257ce2f5a0e1b4c6deae01ee09d7115bc96",
          "0xe0ec5857258d37d07cad51648242b6a08d31042ef371c94e88746558750c8a1f",
          "0xc0459020483568da3dca876a3f000aedcf61371fec49d45d50d950c546015075",
          "0x3a82f4efded90a0887f0cbdcb842fb38eca709533ed13645f575d595be1cd292",
          "0x9aa2d7883ecad03486e60f9a8df53fb6b6e0649cd604c513c55420b4fcc4cfea",
          "0xf110781221d72dc2ff57a409587e08fa2cf256ff581e97d250d7c234acbca4c2",
          "0xfc169bff1374b542df18c616b8aab0a952afd263debf67aa74518f916feb7cd1",
          "0x2352b97a88250e7a0bcca9b57187215a77036abbfd5bbdfe321961478c7d5011",
          "0xed25bce4ea8f4a396e6e50b8bd5bc40c74600b2544d300ea2d0ff34f2829bdb7",
          "0x07fd77e40cb895db36e02e6717e887ca1ac7e4690f0ca30cca8cd408978f3404",
          "0xc097b51151a07e0f3ff1eb0a22711eac86450a575e384e5b0fa5b7342f2bda65",
          "0x70f8bde4374237e0050cd882c17c9f0196e20102e9e35963f6934fbc630d190d",
          "0x15b3d0499cd3ac0378b1001de16afeed967b0bfbc419d84dafcd3527485a5660",
          "0x0f3af329aba384eb24fe9ae50c3b5ec5b7e091261e6790ed6e3ac1a3e7fcf71a",
          "0x69ec2b88d39acaa73b48f80928d63e4ef7e757d349785a04b30a58c9b8a20b79",
          "0x6833f671c9552d8ab8fa7c9db3f284014ec5492e71c0eb858c2c596955b0ff6f",
          "0xa0ed6f048a60e74b65c052a63c79072b05ca7bf76ae40ce7be08e8d5b346de8d",
          "0x2d8dc10944387debf68374e6aa0b83c77c5876baa03469b2bc7be813d1a6e506",
          "0x7a5d311d4a64f41dcc580851ef984645bdbc6d9c139b8c2d3f669fdd623ad0c7",
          "0xaf82913d6af8ce144a6dd86c9c39253f15b5a687bc3ff6e87e356c83f8b79b1a",
          "0x299f655c1ec17e764ef766c2463ccd95b5aeca1619cea77fe1a52abbdc074efe",
          "0x606808f9f74b6916ed00e027173340d848a3e6c4495e4d14339dcc38e03a13cc",
          "0x839552a7a20a249d05750c5ed8da48e27017a757181babaf182413f9d6d74a7a",
          "0x3635ef1d92ec27cfa5eec38ed7e31ff5a8d527f475e51d2d7fe8a23d4c421815",
          "0x9e5a53ae81a0dcec282555650ea4a9acd7a4fbe169ded6a3f7ed2a14b43a759e",
          "0xaaf36423b2224f45d9cfffd97584a25e46d2c10cecd7709543118d457952f9a1",
          "0xbc020b70a2c5322ff2c7be84140e22caae81f1aaa39bee7114642c190b7e6c69",
          "0x38a186930dd07bd5fef9a6abd9c4d163555145935204d0d4e96fd2b130a5598e",
          "0x15694510c429df140aac2c97c070edbd3ade7d5f9139276f6e2cfcf7c81a8d2c",
          "0xfab1d4e19114a34f5b989825066c50121f60e870383c1b3019aaf6b914f05006",
          "0xb3ae62706d2baf9e67017bf3e989fe26e29c77bbe987c24d8336daa977a1f454",
          "0xddebad407c74405e74120370008f1bdcf5e6f8d4a44691e4130c1aa04810e5b1",
          "0x243fb860ab695d420bf57c0fad9149200e7ebcd8f33f8ecc976c797e36632e4b",
          "0x76194b708dc02893aec55fa925f3b3fada7f3541f9985ca8d919c6bb9c4ee8ec",
          "0xa1aa1d3ef46f21568e7e9825f824a0cb6e568ce7495a1474d118e4ed56efd892",
          "0x8bc30f2a69811a6f51d6dd1ca456bfd82a0897d4fbe25bca110dbdc980540342",
          "0xf28f61ad95bef578d9bed317a57d5673f55855d1a8839bf6dfce83bb2816254e",
          "0xdf32dce2b025155f54eef2ae4171516563963bb9917a359d6867ca8b4d99f83e",
          "0xc827d2bb6e28fb80ae7a54358e11b8c6045da15937b55e0449f9f18dccbd6f91",
          "0xf2862406f8140f9b87be64bd7f4e07819755d422dea18e345a177244fdfaa776",
          "0x9a270b63adc7d116d76569f0d62d7f1ed4c953b092117513abe938893b63a429",
          "0x26cffa9d1ce1a10c24879c7f572ba9c06023d8be4cf8eb9e7dc5a89afbfbefc7",
          "0x141b773352de3d2d5e8adfe35871a3f4a9eda979101f318e24274cf8049c7999",
          "0xec4f1ae56b422dac9f85efa00f8459c175bdcdd48b653f4e06fcc9605cd4599d",
          "0x83e1ec0278752233b112e2fb3770b31e7ef425831e8aec9d4882d76593401854",
          "0x5d77d78deccd13887e954c6c22e31c28a1a540ef5e1c22a30eef5dbb14534802",
          "0x5ab01b3e72450a7a4468aa35bc960650a60933899d855b14e722a6494f13ae39",
          "0x634754269a38c561da0d524b567758ea28ce77a350389969903731a312c928de",
          "0xac0b40779ae6ac8294f2178cb06fd9277cde52d14422e83d2c5c1e024653b781",
          "0x822b8b84dee769e5c3e3ce958603a18bcd19f93fec5dfde38b7673983091c96d",
          "0x5bf500cb71d5317e67786aa46b64295ff6550506582e22e6cce716b60fc00b32",
          "0x48191a23265db5445f6b9c4b4d7a36df1659082e03e99a8a3a186829b616348c",
          "0x1bdde1c38e628d4e93a550a4d97322b8dec59e8096f4bc8da3df963282c8b280",
          "0xd1f972c887e4445e1267d78c91c6c9b5f402629fed3fbd584f01f2ea48c79fa0",
          "0xfb65896d157991869132aee933f1ab9041f9bbbe34d194a73376ed86ea385425",
          "0x74f9f5b52c417d5e406d29f91099575d83ebd3104e0535e7327d41897a64b7ed",
          "0x8b3831518d4dcc53bc64175b0afea32f93431d43b142b96ecbd6bb3f2011a99a",
          "0xfcf49a900634a5ed4b36d9510c4b26f104757a254c1759517a19cda68d4c2646",
          "0x11db35659111e84bd178112cdbac12d64504363eb73fb0b8e1f69db1a01fe4cd",
          "0x0cbff1b4400f5ede67b787cc383c51c99005f38e5ad16ea035f4fbe4c1fd46c6",
          "0x76484b1b67d8889c22a9e2617f71fb14147580f640a572a77ace482865300291",
          "0x87de188d855e3da8127b2708c983d41485aa5fcf0a3dbf2a392d9970099be5d9",
          "0x1dc2970515117b76476ae138b50b22e356ebbb33e7846a9d75680ebb9f5bcd24",
          "0x59f9707c8e234b65f817400dccb67dac4c34177952090ea40923153e97156d08",
          "0xddb872871b7f3a9dde278154bdb334df251b084462ecb07c56f48cab6752a4cc",
          "0x09de724e3f812aa68d7efdaf19275ce263bb2f4134e25b9e1ce429f663c34ccf",
          "0xd0bb07d7f4d45d9eb54510ee66aece5fb7aa785c8fc45eb5b4684e4dc7d814ab",
          "0xef08a741f3afa32ad811846d6d2aad4f24ad1c3412147d97eef0af23a790de52",
          "0xb0d7ca53d703b0113b7272ff395ae3a68973c2808feb9d9ca0198ad1e50ac600",
          "0xf299665e6b79c5e0b5a3e69bb28d0562ed9957a0bd7d51f80a1f72d77fa27278",
          "0x84c4c4c40ec803b9d4444b436e0a0f9a2079678c71c19fe1e7f29a2e5b5f490f",
          "0x8f619c82c0f356ba082177175747a58b6f992957d9bb51db711757fba50122f4",
          "0x033f56825a5c8ee61eec2b25780814ff57efee8e039d8f21d307ad9333d2d3be",
          "0x936b112dd719eeeabba69155f7571266f0fe59d33185314fa35352326fd68b96",
          "0xdf4138476447c76df8ebb8959d44a9841d0786b0cab1f7fc8f33342f74891abb",
          "0x25046811b0972eacf5ae40a01b669180679c05d7ede564d711158b7279919613",
          "0x8f1fc37662ffe2bc415c48824f9909e860c7dd4790bf92e98aa252211ea17570",
          "0x1c0be789661f599f19fb7962a968f32a3d4a05f417dc4bed784b86b817f726ef",
          "0xb3472cbe333ae742e0622afae64762a8636b8f6d21527046ade1050332ccd452",
          "0xe23efffa788164b48dffa2f38df9794212a5d5f4e9abb2207ed3b77c6ef3da25",
          "0x5cbadb509afb16a3cd949af8890d84d98bdd795b9a9cdd4ffb3dbe750aeff1ce",
          "0xe32892452f18c41a3db497343a14e0fb685a3269f4da8c71a14eb5491d10f366",
          "0xd6486430a5b0d51d013f35a2c897464361e917363f2ca5b446b984772d562dcd",
          "0x12e7a7987f75e1a76d020bc90d24a135ebd37656813f9ea4d9b2ff6d50c1eeb5",
          "0x7a086cd3a6e5f8d47ea726a2e67ce15d3b9f967e6ae26e18daa2f0da0fe64b1f",
          "0x965dae2b2b3a506f7081115dc0857b72ccd7600a3e026231e7ab68ceb13fed23",
          "0x9515cb3387483b30bdff2d3d35d1e60686f1ffbe4e89d983c5711554a3b867ae",
          "0x7fa00aa250702dc324896774ae113d53520cffeb5ed9752760cf2b2b5bb9e757",
          "0x21f725b8e948ec95ea97e7b56967783e8658d2736678a9509ac7b063d29b2fa7",
          "0x45732c494562daeed5b8f4d354cd31f0b7c4125b5bf4161982e0b96c460ecd32",
          "0xc4fc6120449f2f4c03361fd983dde17e1f636f723784728d706e231e23b36692",
          "0xed33a670d4f8c3c8e0bbd46d2b30aeafa282d2bcc2119c248a4f44e5895c4e47",
          "0xd4220157ad2656db7422d66aab994165b8cbe7514f6a14effeed9db174359354",
          "0x3313105e49921761b89580cdf6863c5f80886f9ed7fe1b54e85cb6d2bcb048ac",
          "0x13fbe931ab0114ebcc425dfc72629a5f402e128bb1172310919d649a9484121c",
          "0x64df0cd1693c2fca1bc05dab3b3b8f549436c94a92f26ce5255c036e7c707273",
          "0x30bbaaad563f92e9c2be2c602c6b6b9765cd8c8e9e599b334efc4bb4bc795d4f",
          "0x4366c0151e4120c0864f2a9b688ec47be83756fefb4deb876b3aadfaf904abde",
          "0x9b92a86220a37e4d77e06a26f1b8ec57120d702e0756b8567c6e495a4908719b",
          "0xc931ae7d8fbb6272d6584fbd0e392245753120dec6d7bc6d734478dd34e58b24",
          "0xc3d47a8a98d8bf771a0c4492b78b48f14734f30d30a3bb95695a1657d83089fe",
          "0xb561ff66bbd8d7c0bd6244a6be5e1977073556d2661dd72465314e9cfa5555a0",
          "0xdca28aa9376143111039475903f89a6016b8f25ec28a0fcd410cf96285a0da5b",
          "0x1df0a9b08d55a52c2f562eb53e0fd258e231737fbc1af61d310d413c9fbbdee5",
          "0xfdd9b448d6e5864144bad34d9c10d48157d1eacab7703cc1f3d5ea830f56436a",
          "0x569ec62272a6570895287d0c4d3d109a78bc066fd001b18cb4fc68fe6b995357",
          "0x01728172a35157c99f730eead31bc04e267cc38080d894a1502d0293e3264d3d",
          "0x09754f89f94b75c30b629cf5e3f93550ab6011d063463c9dc70b3f2f24b00f6e",
          "0xb614269ec56b0f1ecc23e103705023670cbc0af1ef3f3e7243990d61eb22b6e9",
          "0xb27d1362d143ec3a26acfc11a0297808c8fb31bbdd79a54931384a5de70adcc8",
          "0x26a39f3d49a78380ceeffdba10a13bb54ce546157ee56607c25af4bae1696f28",
          "0x4cf8be94e6a8806b4c1f882fa51c8a7f4ce82d342cbd805d69d9ea7d4d858180",
          "0x995ef4cf53e51558ddb1cebd1802738955c65055a5dbb087a792aaf120d1e97f",
          "0x7f5b0faefce86e4d602e80214787a40652c234df8f7cf02912fc6e3859cdb847",
          "0x18087d347d235463e29dc2fe0da15c5f8f612d8f3ded58ef68284e8d01b72e0a",
          "0x83dd88051f11e1e0bb658bdc122e75cde6fbff1801bb580686c28a35e868a671",
          "0x7fad852270886a8104c14bbbcf1c1cc81cc708585c3e75bbdd08cae5d9464562",
          "0x094cc63c6bba81c9e7c1c2a887bc270e49c4053d7893c825ea0369a1b45f189a",
          "0x80166dcdeaa38466ad612fac6afdc6adc2d92f56147ff45e9196b395f580814b",
          "0xd1dde9e0502fa4fa5432b43aef62ae5364db0a104376b181dea632476cdf8e80",
          "0x5d8f29d6aa92ff3f50823e879b7e9532ea452757dbb282037750eca0ced606db",
          "0x144a26c17ad43ea9a1f5d82398b7148ec6bb18a03071a75f1cb3afdd388c13a9",
          "0x04d9c2bde88ab4856ce3491ccdc4a1c759a2dfa0001146681a12edf59e797456",
          "0x4146c1abb53c4beeb723c212474d640b779548a056598a68c8852ccb1e54d645",
          "0x1d77452891d9af7610ef8950db43c3280427530077dae12bcfd41fbe1af653a3",
          "0xf5ca08d5080ed6ea6c9ae41df57b7669d7cce6feacc7168e0c51a3ab7b0e502c",
          "0xa56a631b48e342f9666736db434f425b92d77a80dbb342797d9ac82f7f42b404",
          "0xef2851d2ec8da28595d3229ea10b9d8762e0bc90b1ce89843ed390c824875153",
          "0x9b0b30e5b3a9e84d282d87d20c6e99764972872009d00e2661950bd1f085d4bd",
          "0xdc14aee112aa911832cc4578b5b5614c0e70a021cb592196f226b4c4726cd906",
          "0xc3fafb47071c967e5a1db5f6db32d8e15658b1bc8aa8f16a66df3e049a5d1b84",
          "0xb6992783d1369c0d62daf12707fad537699b7e6280de1134e6d7add4500b0f7a",
          "0x5f89c48c044aa05cb04cac924b6cf0a80e4bd2c37e07c5d81fcf99558459ca0d",
          "0xf69ee17f6c1dca082e02e1077c89571ef2100252bb32cf162e7dc3fc82fe9841",
          "0xacf0276d05a501ea26d2b0887232d71947cf62400570de93643e4e8c2e713365",
          "0x16fcdcd045d240a3362413b82a2dc1f961ae3fb5e061e85594cb6bb01ff9c01b",
          "0x7886be5532a121b88835668bc7a7992ad5e8dbee93e9e49f31ced858cd036ed4",
          "0x76d0c3f4c4beb41ac816cde0d681052838828593e2f12766dc033e1b725b359f",
          "0xe02c2bee1f5d2a12699d537b67d1494a157264fb9381551f80adbf97bfad404b",
          "0xe59ae7fefb5d2b54f1a70781deff8a9396af688365d4db6cdd6e9e86c77c09fe",
          "0x180c3f4adb0addd43cedd8be232ff0bb005aa8cddcc67addc3e77599dbc18721",
          "0x8f46120e1c9a211354e355afaeee987bc50ad0a40c6d6b5f45f69fc64bc9fef1",
          "0x13bd5e26c5936b99d07add30e8ea0a8c2aa448c3941d582eb792551bf054151b",
          "0x6d669c716aa001f9b53ebad549c94bdcd36b2c934d7870c14212e7581938543b",
          "0x7913741894ccbbcc18ec87bdf5592cbd469d30cfdf211ef83d8364c1cfbb4489",
          "0x83d1dae842bddb1df7eb0537445f95cfa5357f83ce848bccf71231fb8461d090",
          "0x6820288efef200d986d04c8bf594b4367a5d7283a96c980f99eb9738393cfa14",
          "0x001b1d635b9745eda228c813526a872921ef0f9d79768c86f2250f6b302ccff6",
          "0xd5235dc8dbfd73456384d37532c5b88b7e363f080af8ad0b25bffef92d5e89e4",
          "0x9956a4ce72cf00fea2a08147b726aada8dc847bf7a0478e98c2a7700066085e1",
          "0x807c03a6d9575bc89bbc476fdda7365862162311eb8e88f2f4cd5b3e4e4c5d57",
          "0x0742b20a46531431c90ba296cc733e7edf45b8510617b14505762f32fe20cf7b",
          "0xf6a2ad61bde7e0cfcf53e24827888f797dfcb1ed02620eb63d271cb30e90a255",
          "0x61ef129b0e117162d589d8773610167692d44fb8621d713c55b26fba6479370f",
          "0xd0b153a1808df7a277ed8fbb5e62f737315a0028a6b8480fe1765d66f1e1985e",
          "0x2d6df74eb6853272991e5b3084572a085bc3bc9f3e12e89c74fca37c1430b4ff",
          "0xb40fbf0b8c426a8f00f6ba98341f40c9f25c1b3bee787ce296a3b7712f49c4a0",
          "0xad61ca359d5fa17ff81fd23af7634db27305ad3ce41efb760fc96e58a2f0a9f9",
          "0x9278387b7feb6dae5c26554aa19e23f3ebf6b54e4ce91f32f56fb9940175d256",
          "0x4549840928807146e38b0e28b689e2c9919d6844204ced7f43937a50646a2608",
          "0x17f382a1499c68d7103a0f034388617213ca9f17dc7b2ec1ca3880a087c4d733",
          "0x61e4eae951ae93a97cdeea9fda79b0cb2335a0cffc0c34b3b5ae2fb952825574",
          "0xd806ab3fb23485bbc14846b8396c3d0abc6a1f9cead90a2bf0330957592b5301",
          "0x9c4e2fb7034f5e5c617d99af114edd1c54bb1439879237c1649148f23aaca9f5",
          "0x70151ba9f27689ef41458c369a986ae6417b121b15a233cd680990b6a5ebfbc4",
          "0x392be95b063ac777855c2b57d4640df135a85b1a3a590793d4deeeb6d1f63e74",
          "0x8f73aadb4e23c5603e889d4cab31e0bcfabc98cee0aa89b832e2a6712c65cd7d",
          "0xf1a98c7e1d7f9f757c0de5d2eb9a897557511656fab2b4e2681cb35264e46749",
          "0xcd9272da2b0bd6c712d2f8d032ceb7740a59670525e756bfcf433590f31ada83",
          "0xf01d6e5f57f5f2869d2609ee962a6eb44505a0ba6809183258b07da59e84fc2a",
          "0x9aac90321684a0fa7e4b7018446b1b7e4d1bd921aff61627a9fe156366e19529",
          "0x917a58deb1512fd73235cfb3bb4b4a77947dc628a070e3069ee715a612cfe9bd",
          "0x09a354fedb9402f6b7798ad5d0c0fc1666484217ecdb4dc1980c948e66098afd",
          "0x3187c0b1082c98e88129792ad3bbd6297581bc500e9b1b133f4cd86e5ea8f704",
          "0x0d1baab34ef48960af4842abf05d5af52364b01962e95aff550a34a5a3af49f3",
          "0xe1974f9bdb018fa79ec5f3fce55b3646fadbf5409d7205dd5fa0d77208976227",
          "0xfd114ec55a9c7c43fad47addd70d3b572e29e44bbfa3d08223bc1ebbf6d5e412",
          "0x27db4205a0b500f2ae20a1e782dee82e7bf3d4c737ac38aa702bd1d4332172ed",
          "0x55346ead2040076495df5abb3567a46fee89e6fd8548626d7dc1648cad8bb3b2",
          "0xf758c075a1d9229e5f69cca6fbd5f70f91be31aa7f5091b419e4b4953d94e110",
          "0x2e2b0073196e9fecc12ce9c7bfd838684225c2d99deeee2568807ee4f4ab781c",
          "0x6fd89dda08b7a8d21761146b3163a04a594d4d4e60a96884617b1206e3013ccc",
          "0x40c95b0941d562b9984e81323380894335f70dfee3fcc5a86ecf8416ee61cd89",
          "0x10b5f2d3c885398926156789e4b7af7e38edb46c63419b7d11b3521a2d4d0eda",
          "0xd6f2c258159961997df0da56abd1cc5cdca8fa347cd26c83f290d68e0ba3868f",
          "0x6a15b8178133399d8c3bb78240e0fe127de8e214ef78a9662a1ec1800c03fc77",
          "0x4b457f28c756c152d68e6b745ca3405c07b1868024a4867183962b2ffadc711c",
          "0x7845d5363e6b45a42a27c81e5ad153703fd94181ee7e0feeaa1e8704f3fb1312",
          "0x1306f14d2ac4f63ecf1ecec09acac4e733dc00f46099a09e4c245fbf8a01bce1",
          "0x0bec1fa12a543231cb245c9eea5da15ea2a27caed39e2d2afb97d5c56d996ac8",
          "0xef8af967a6c842abb93422dd82bfbd4abc5f26a275d7c69318f5ded95d5c5a4e",
          "0x740030357bc2f9d63baf645c64400c0a76bf577d64e9e06cd34cb5e3aff71eed",
          "0x039ec0facb1fd23e9ca701f5e80a8b76b3453d37e0d26e25dbd28329c4087a9c",
          "0x0e7c42f66010d776f4e3ee31118738b7e13edee374cb0861090ea3e31362d8dc",
          "0xad35d14d2a69f2a105b8d27acb17741b43818ecafd696d7eedcbe5a7fd3baed2",
          "0x3a856c2eb3d09f8104ce6e955663e0ecc2da1240bd3b1788a495f7b477a3eb87",
          "0x68980ee6a368be3197d906a263f1b5ba3358412152f61636c3c4dd2a702cd8f0",
          "0xa395ddb491f7634e1432daffd9c9b18ca1125bb221a2a1108ae817dde2e6746f",
          "0x02ac98e394587f01b64d3a09ff3a144671223ce72735215e12345daa608f6a32",
          "0x24de9854060cd44ecc6f83a8a336e162b6a92d244c60da62be2760ccae6cb763",
          "0xfc44a8484083449c792d25543620354b3d3f407377b0643515994c2f6cb4dd8e",
          "0x29255be819d753621697980ef2b35fbf4193f70ba8b177c9bdc767e8dddf26e1",
          "0xac07d80afc80bdce949cd8f756f0b43e91e3ebd88301732976db300b0e78353a",
          "0x39fb50fcc1f45f5f3c4f7c047b618967d3bd933e05a377d14fb2d19bf246020b",
          "0x8bcb405d0ac4cb7c8b637186f00915906a13e3081bdeb3b93d25e593129ba67c",
          "0x0a678ccad967b75dc8b9e7e6c71c93b17bd4f3e8ecaf5c3b24a27338070bdc6a",
          "0x162a91cfef3ed8e0f512282025f695d5ec52a94c685dd209a322e9472c648395",
          "0x58de9229487cc9c9950284193662e0c400c0e6f20c745270e758b8d9e1feba49",
          "0xa3e2b31e2358a7ce6160e0e2b634290ee0290d8ac82ee698cef65b18c4568794",
          "0x17712ec987aee705094ce13798b18acefb9bc708ed11fbee3bd8f7abc83af7dc",
          "0xb0852dbe3a0f69a0c6312814506befb24ef8d493d56cf9bb32996751301ea59f",
          "0x4d5177e7d2ae3c1a50d2f23009e03f944bc3dd37e1ff444f41fa2fa40f7124b9",
          "0xdd9b60710839ea30d206b40ae75b1350e51f2ff08b88435c78a7576d07de02b2",
          "0x3d55929ce4925f638804d647e38b855c7892b8f2ffbab093462ab7a50901b41c",
          "0x7ed63aa99cb8651b3614a67d7070765bde39fee42ea87c894516ff13577364be",
          "0xb5e079325f1002388edb81f76693e7cec0cee1af40d205ceee2e097387fa8744",
          "0x6a9e6c0c73ecfb256a8dc795d600fbe4717eefb094859d6a3dcd7587fda820e9",
          "0xa7b7cf0cc182143d66e3c4583a581d9f7c7ac71396ccc6892c24153336c732e6",
          "0x5dfee2e2a5b09ee167ff19009aa324fb3f02de9c51ae3aa28515948610a4f261",
          "0xc34f2ccdf849e5dc5eb630aa36c5cdfbb70084b501c428b0aac5e994f5f60580",
          "0x4034287b2b95e07231d57181ea26866f99c8d2bbb5397a1fedef7ad2e7a8f1ef",
          "0xf871f209a6568fce76f72c2d11a50314d4c8ae9dab30c4a2e7e0406c2e278de5",
          "0x11d2c6411a696ea5961a1e692442bdbee21ffc0f0bbd45b82759881a4d447cab",
          "0xc4da3c6ff9196d434d4313128a570c02748175289cf2c9850796faaab9195e8a",
          "0x99e5dee1e4bcb8af2954e45d5c2d435edc865a6a926757da0bcba4e84cd95223",
          "0x920ff4fffa3b2e33d170831dc7dbc70a6b02d931ceb9b48119dc51959c53db43",
          "0x32a4aaf3feff31258823eb6f5aa87d07f8ceeb6933bd253eb379d0d9d07c4c47",
          "0x6dae9a82302aba57af15348f59e691221096475f82d28fb89f1377f7fc9ab634",
          "0xf181cead119d734b5ecf508cbb04f32b2fdcbc9cde5e2378844ebc0f8ea3433f",
          "0xd7071352eb05705d6124a4a7f64e60d4c75e7db1041238d2c3012fe131da439a",
          "0x1ded7f0113bfbdc49c08eba2144c3986baf2b06a258f92a844d144e04080a771",
          "0xd80402073c2c2de02a2e7585dfca3678666dceb751b97524b2c3e253089f5615",
          "0x89e71b72119881caf3e7b11996a41c4823c7e8ac71b310573657eedc426aafd8",
          "0x363ea625b5019af557f7a5b75959754e163d41c0b8151b05d0d7fc4cfc753869",
          "0xc0f5ef78cdb7dcaeca19d5fefc96e2b2c1a12f14075bb327ed0aae89c99b6ef8",
          "0x0a4ff45d7bfcd57e156cc29e1a0695264cf936c4d6fca08c1a95c9dc37ecde24",
          "0x507f0b83b4ee772b759b5bba22efc1e31c0a405900a273b7f7172b026419b261",
          "0x4e0b38ecee0ad823a8c7f765d526d4c61fc921433f069605e44daf5a9812d2f9",
          "0xea4b2dbbabc945e3ac13655808d8c8af172597a7a5e3b32946d7ad100b9b8619",
          "0xa23004b774501307a452d54fd49720b95dffb953dd2981e9f52fa16bfdeaf8f7",
          "0xd1b2763bcd0058dd7a8b84724594a8dd20a5378edbedc604b0b38fa8510e6a78",
          "0xe895fd1961ebbd37b993e377bf4b2fbc3e2bd594d2a8cdee2086f6b1bda1818e",
          "0x0c2991f9861c446ece378bf22e32bc34c80e6ff3739a7ae6116b332bb19361fc",
          "0x0055a7b1bb988d77cb701d3d12befb8cb87a8cf4a8b9ef2ab6dd4a433c7d918c",
          "0x3c6beb333b1d13d16d99f0b9b798abe00a871d73f1e0f4865359c0e1f1bb6a74",
          "0x01a2311ae6ba288d2b0f5278bdad1b569628642008eb8d0d221244596f002f32",
          "0x670a9984707c6d3e5e302171709bfda96be7813a95ecf2bbd6b1bc5e14b5604e",
          "0xe3b90a11a66abfe7dbf9c905627e5f9e5d4f57002271bcb3f86a5a628295c3fa",
          "0x0d3d4fd477b2f9b2225efda2399bd1913c2de073272850aee452cd372c3861d1",
          "0xad881b1cf7a034eefbacebdb7443c7967110b1887d16029b7cc91367c14f5b61",
          "0xd4ec2fd4d2e905b94149c56d1eeec86a5dd5413bd3fb074023145ba010f43157",
          "0x311f92fa897489e286d7c77dd94808939ed28999da6d99948a8f83907732c1f2",
          "0x5764a7c02dac6795435a8a3f1c259ecbe1a86e0f3b030ea2fe5cdb24ab5711c2",
          "0x622013193a0eb4ab9020be9cfcad36469880b332493a317ec9d1a1c6166f69e6",
          "0x23c9b67cde48c7e25d3e76e188d3df09adfe9e40e6f8c52d4e308f85ad641625",
          "0xeabce7193e73a4031351c585b9a59fa73b1958feb803cc2687fbdf116160f663",
          "0xd79b721a6210a0bfa1bb00c4c259aef8c8505833125f43897ec1aac4a184f7f7",
          "0x4b8eb8e5e4487ced5171e4467a7d70ce1261a1c073bd788c729b26ad8fa28796",
        ],
        "transactionsRoot": "0xa01e70001323690e47e4356b4b4488450237298b9d306872fd6740155c8d9c9c",
        "uncles": [],
        "withdrawals": [
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1277c93",
            "index": "0x4e822eb",
            "validatorIndex": "0x2f2a3",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x12763cf",
            "index": "0x4e822ec",
            "validatorIndex": "0x2f2a4",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1279081",
            "index": "0x4e822ed",
            "validatorIndex": "0x2f2a5",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1272d2a",
            "index": "0x4e822ee",
            "validatorIndex": "0x2f2a6",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x12773f7",
            "index": "0x4e822ef",
            "validatorIndex": "0x2f2a7",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1278e11",
            "index": "0x4e822f0",
            "validatorIndex": "0x2f2a8",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x12761e3",
            "index": "0x4e822f1",
            "validatorIndex": "0x2f2a9",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1277e1f",
            "index": "0x4e822f2",
            "validatorIndex": "0x2f2aa",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1270b2e",
            "index": "0x4e822f3",
            "validatorIndex": "0x2f2ab",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1275a5e",
            "index": "0x4e822f4",
            "validatorIndex": "0x2f2ac",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x1273f12",
            "index": "0x4e822f5",
            "validatorIndex": "0x2f2ad",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x12711dc",
            "index": "0x4e822f6",
            "validatorIndex": "0x2f2ae",
          },
          {
            "address": "0x86bfbe094835e4f2b991b9b4bfc9f1f862f1f351",
            "amount": "0x12722c8",
            "index": "0x4e822f7",
            "validatorIndex": "0x2f2af",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1277d96",
            "index": "0x4e822f8",
            "validatorIndex": "0x2f2b0",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x127599d",
            "index": "0x4e822f9",
            "validatorIndex": "0x2f2b1",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1275fbe",
            "index": "0x4e822fa",
            "validatorIndex": "0x2f2b2",
          },
        ],
        "withdrawalsRoot": "0x3961d89b4f3f7d12b2704e57904c0b7b6d8ba9f8b3b54652e63f0f0776cb36e9",
      }
    `)
  })
})

describe('args: blockTag', () => {
  test('gets block by block time (latest)', async () => {
    const block = await getBlock(client, {
      blockTag: 'latest',
    })
    expect(block).toBeDefined()
    expect(Object.keys(block!)).toMatchInlineSnapshot(`
      [
        "hash",
        "parentHash",
        "sha3Uncles",
        "miner",
        "stateRoot",
        "transactionsRoot",
        "receiptsRoot",
        "logsBloom",
        "difficulty",
        "number",
        "gasLimit",
        "gasUsed",
        "timestamp",
        "extraData",
        "mixHash",
        "nonce",
        "baseFeePerGas",
        "withdrawalsRoot",
        "blobGasUsed",
        "excessBlobGas",
        "parentBeaconBlockRoot",
        "size",
        "uncles",
        "transactions",
        "withdrawals",
        "totalDifficulty",
      ]
    `)
  })

  test('gets block by block time (pending)', async () => {
    const block = await getBlock(client, {
      blockTag: 'pending',
    })
    expect(block).toBeDefined()
    expect(Object.keys(block!)).toMatchInlineSnapshot(`
      [
        "hash",
        "parentHash",
        "sha3Uncles",
        "miner",
        "stateRoot",
        "transactionsRoot",
        "receiptsRoot",
        "logsBloom",
        "difficulty",
        "number",
        "gasLimit",
        "gasUsed",
        "timestamp",
        "extraData",
        "mixHash",
        "nonce",
        "baseFeePerGas",
        "withdrawalsRoot",
        "blobGasUsed",
        "excessBlobGas",
        "parentBeaconBlockRoot",
        "requestsHash",
        "totalDifficulty",
        "size",
        "uncles",
        "transactions",
        "withdrawals",
      ]
    `)
  })

  test('gets block by block time (earliest)', async () => {
    const block = await getBlock(client, {
      blockTag: 'earliest',
    })
    expect(block).toBeDefined()
    expect(Object.keys(block!)).toMatchInlineSnapshot(`
      [
        "hash",
        "parentHash",
        "sha3Uncles",
        "miner",
        "stateRoot",
        "transactionsRoot",
        "receiptsRoot",
        "logsBloom",
        "difficulty",
        "number",
        "gasLimit",
        "gasUsed",
        "timestamp",
        "extraData",
        "mixHash",
        "nonce",
        "size",
        "uncles",
        "transactions",
        "baseFeePerGas",
        "blobGasUsed",
        "excessBlobGas",
        "totalDifficulty",
      ]
    `)
  })
})

describe('args: hash', () => {
  test('gets block by block hash', async () => {
    const initialBlock = await getBlock(client, {
      blockNumber: anvilMainnet.forkBlockNumber,
    })
    const block = await getBlock(client, {
      blockHash: initialBlock!.hash!,
    })
    expect(block).toMatchInlineSnapshot(`
      {
        "baseFeePerGas": 578808939n,
        "blobGasUsed": 0n,
        "difficulty": 0n,
        "excessBlobGas": 131072n,
        "extraData": "0xd983010e0d846765746889676f312e32322e3131856c696e7578",
        "gasLimit": 35964845n,
        "gasUsed": 4038108n,
        "hash": "0xe84f123bd1dbb0bc21807a48079e21d5a3ee68b9629ab72d889436e8de57e919",
        "logsBloom": "0x906108000108400000818203842012000420102940210030628000400812208410710804220810002000050240124991460900518c0b825600a3228004284d484d01204409048110c88040181060a4e404000010c140480410100408800002146820180002c3402104088390104028821080440a04100c009a10003400051261b0100444000020004314006810306010020b04814526000c90408840281004921a214200301029c0400288e00001280c341080820840088024280402004060410202101a6300010040000818110c024480146009020000346808001a080860020510301000800024008000510480000190002100010c04c00040018408000c41",
        "miner": "0x388c818ca8b9251b393131c08a736a67ccb19297",
        "mixHash": "0xab048d1aba06968cf2a054968593c88d54edf4a8c303a7bf045d9a55d655ab07",
        "nonce": "0x0000000000000000",
        "number": 22180097n,
        "parentBeaconBlockRoot": "0xa3c571522029f61c8a3ab34a6683b461ebcebbae0786a597babb69cc479c7c88",
        "parentHash": "0x0c594782f0363fc69f546a34c6dfd2d51aca62a6348dd2432243eb9c65b8c14a",
        "receiptsRoot": "0x02e8fada9484c1c30d5eba8ee6516b49e703db0ed25f4dc494b67d7580f64739",
        "sha3Uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",
        "size": 19294n,
        "stateRoot": "0xb72df164d58ca907fbd8593cd0c1a2b2f985745bf76f905a6a09abbaee4669b4",
        "timestamp": 1743583283n,
        "totalDifficulty": null,
        "transactions": [
          "0x854722bdc63c7b3a389391c88cf8ba8215a78348e57fc1cc12fd0ab5281ddbee",
          "0x02cae7161a4e06197ae0178b4875299932bbb88bb7722b8d45dd4be10ed78c98",
          "0xb7d723dfdbd3c3bab81060b438bd87bcf07914753d39e2a0faddb87066e7944f",
          "0x4787c0f5ee67cb10805c4e9cc81ea5f7037a7eda4e93ef145ae4c2fecf03f660",
          "0x59ff041e644a7294cf79da092f65af4329ea6cabe88bd1df53d0ab4518cc518f",
          "0x5520923d4abe5a7a1eb9d481eba9a69740fabdf95b3aae9594a8c1005f5424b6",
          "0x4f547ae4274b602dff5cde7a7fa962bd451e639ba2b856c903009f831715aa56",
          "0x83bce88701a89e0df991dacc817ecb31671a8aa06e0725aceaf2e03f93258237",
          "0xb56128d1a930d85d529f05a8a01ab8ac31341be758c4f733ba13b32ebc2a4cea",
          "0x01886366db19111106a42f7a3fce8d3a31266e72478403c901c9b59bf2bd01dc",
          "0xa2f08cebd167a4cae54c5e2d6907b5e2d49739ca3881214c49e58a37bf6e9455",
          "0xf4174f3311480a400f9a7d8960c7440c186e1beedf2dc946f81a87b0d48d235a",
          "0xcf8b1cd812489193f99cee59d558364ce36593bc89bbc174851d173897241180",
          "0xfb0267c2413094f54a4cc4e913e6fc384ef2ea31bd15b5371d1be17206f41602",
          "0x5ee9e22b89405c490d938e8904d8f50e5788cb400f6f8f89523227eddf8b0629",
          "0xbd808d6736b93870c1a81cb944b444ec02611d85136647c090502ce86bf9c923",
          "0x18c1c967ff87ae710de86210a32e13999509aeaa1472296c17faefe145c53f91",
          "0xfc759550f99be38b1a938f3bd26267353828476e7f5a8dabebb676f710f380de",
          "0x4019b7b381fa1daadad90b4b6d2e02de07eb1e8d6f0b36bb14b62f2e85fe9efa",
          "0xd2bac5f3c8d0b8ea1efc84fea5b7c92ac1369f9b7be90527ffbbb35d35aca077",
          "0xfd69918724b556e832e85e22a359891e08fcab37f4e6c70a8ff1699176e15453",
          "0x50a7e4b5697b0df1bb4a6bbf97321bb94a996fea894aa071fc210a7423cf4838",
          "0x1af867463b10a71305740219c1fab218571d88f5b75472ad8c25885cbfc01b91",
          "0x5c67e0c7ab694c4714576ff54d2bd2dc6b19dcd55df337ceb72bfcc89034becf",
          "0x2b917db8c9adbdd78fd0bab4edf8f599c2ac99c8b6171b1dc3fc42bc3607d164",
          "0xa15e4bca5ac39a8d3023dad307b3743f801baefba07f203f98429c71cf2d2582",
          "0x8cb6e16ecc5d6b659170423b6e5bb39ccd6933ca214c843ba079ad6306111000",
          "0x269f116d71f5886f59dbfb63ea5a1d4621afc6e6f163f984fd4d1a6c33ebdddc",
          "0x2129b8e7f727a14b793959c5a812ad3ad65c6dfd2b4d41944baa40c56bec0312",
          "0xa026091fa779b2fa5a05afdc01b9af8c618e936ee237274f500ca4b07761b6a3",
          "0x1af67c12db72606b9687d413fd3b9a7960e78d38df615e9e8094192055f9f8ba",
          "0xf00dd3ad522918ff5af7fd8eb85946736d119e5ae560bc5339d3197d03a27c25",
          "0xa196faa90844cc30ed6e48f31e5f5e44415c0a9ce605b5537c80fbc8c597c2eb",
          "0x9b01070b12d11f4e980a37ae00716f58c0ef45482984e21219011e8c96c3359a",
          "0xb20c352eb48b4b0166a64d947b9bf43a0a6da5c3f6f61742725e3ac692d351b5",
          "0xaacc6e6b9ca5935a28cdc115ec187a093031c8f071785b1077525ad62caff8ef",
          "0xee8bfcf3180572c02cbd7d7a0a60d616d58a5a689057a23e38e78aea2980a481",
          "0xba86efff334626a0abef6b52be7648ab073049636d6bca087b473d2e24353103",
          "0x8a3eba30e9d148a217434f2951882d8a620a0a37fddbfef7063c4c0914d33712",
          "0xec9ebbe6e1855f3b9f6e20be38bde066e353bd35604e43a96a24e65e6760781c",
          "0x86df945e7311b1b341f2ebfd3ad7979d5dec093a3de6e89a7233374129b6df1a",
          "0x63870fcb38ea65b28ec381a48c49ae92477662bea9ae78c8a88fff309adb596a",
          "0x6711b81447f1f43eab0609e4f3281b421c8252cd3e95252f2843f2666f916e67",
          "0x053cdb9cd0619da6f570e5ad1330f498199d89a4bea9e60ea32b8004f8796581",
          "0x481645366e47224457043d354bd9fac3a0d342d85fa3489b8ba2c4c95ad06e79",
          "0x3aa5be2e84dd1eb17f1eacf4c8922d622c38c6893afb371e953818bb18085073",
          "0x4d70545132c47146f6ba915aac0e550f1458148c4242f6c73b11d3bdfb43242f",
          "0x18d74382159845c6e1b3fe17512ba167aa2314495b0af6f6648caf0bc9cf02d9",
          "0x965a698cd7a04d50b9421b1719305cb932e3fa60b7efa4e7947309809e4bf89f",
          "0x98af2e3b23bbca8448a3a3a0275890c4841b74953c2c3ff7de3f60146014022b",
          "0x14b6ce018d72dbc4bf9696fca2450a67a3ec30b83d7f3f29b5705a9b11cf0023",
          "0x5b6aaf14c07490e42422da3090c1f96b75f621b883155815f39fcc62e52b33f4",
          "0xc771676cdb93ec14b0d8cbf595dc71201d6dc8d0e7eac292516883515da9853e",
          "0x77f8b676af27863e5c209de3b83c6b28548ef8f9e2ac8dbbb811c72426ce1314",
          "0xe6c20952ac5828c60e0fdf6ac90a5265dd37d82d07efb994abad8a394d0c09af",
          "0xa3120d24651113f14068b578b321a2932729607f910629dcaf98e5468ce269eb",
          "0xecee7c812393be6a0c8674f1753e1036e8ae94aa65e1554826fbe70117fa3864",
          "0x2b4e80afa71c648ea44b68571b1d49dbbd8ec43d6ed7c0c50497e4dada79b7cf",
          "0xefc09f41c36293ff1054cbef26b2100343234b162def2d9958b6cf7f178be2e1",
          "0x36fb9e07cebde3bfd5428c264cf7a48a53ff4335821e94a4453a74e21926fdab",
          "0xc2d7ed094cac9adeafcee17d6108528d605afb3cab55f4e2be2698ab7a2be42c",
          "0x94bd0c645445a3066db377e7805e9adbfcc7e1bbd03d431b93ed6afdb413f524",
          "0x644d39762057df05ef6d81c6091e28696540336f30fbe38e8f77fb02adeb14dd",
          "0xa0335e5efcb94ae2fd7065a7d0b4e6480d24a55eef2db3adbe7e56f4a10f885e",
          "0x70cc6a56f1578efc21747421e3c65dfbdd64b9d045b035eb2270c099c90fc7ce",
          "0xd6da75a688304dff7f987d3b6be703bcebe9926184e57c85e1e20cba53bdcc6c",
          "0x60c676a4bb996f4d8767649a9cc2d5d53ab5d3f50fa80867e147911f20686c43",
          "0x3905355abddf0be3f4c3213420a81a080f6a9eda1f0014ae5f5a0bdd1a90a696",
          "0x94e65d80b8dd755f8ea3f6e7ba385a1b598f6edc52b7f08e3df445717d795cf7",
          "0xe078055c7d78bb0473914d62ae8dbb557c3fec7b3a7c5d757169823c89729e2f",
          "0xcbadc3ca4a1881c2640558e7d60a3e8c7c753281836eeecd856737087a295431",
          "0xd002e072a411c84b48c37d21ff7df3c41b62172f0dc094d5497b565818459fdb",
          "0x2a63ee7e01b3b54691e0bbc03b2fe641202d3d22dd0c48c2348d1e93ad7b0492",
          "0xe10b19b8956908c1e554b53dbf1e52424de31ff75008fe4ac9f8b3a9db9504fe",
          "0x7925eb0a9767c6e05e39118e799245f68026eb93a094fa9b24404fdd1bd9926c",
          "0xbe5dc882a0ffeee04731180dec24ed1ac1d49393e742470f163c83a0e5147ccd",
          "0x91b44316445eac651a9692dfe324e91b57b9ddb544c8961643fbaecaadd4ed0a",
          "0x0ce80c94b4783a3e5f8ad97619fc6a74ece81f1728712502a1c5089076e370fe",
          "0xdb359e8c4805e64256bf706b3921547d666f7a82efe2e6be099f22a966ea5a3f",
          "0x76bf7b5b3fe06055a4a14368a7ca4a84f8ba80f5ac17f26ec747ed596a0a4e94",
          "0xa7e4e10a4d52ee6e151ca74bc68ee7fb6868d22cf94a67cf75468d1a4d0382e5",
          "0x6fee722066f0556812667007cd3e38176ca66821932e437d9bdf2d98434102fc",
          "0x9085a6a8def5f6c3a25d6e036829807cd5b0695268a4c645f01165021bad1d24",
          "0xf2849a8fb3ad7cd02171d076ccb1fc2fba8732e116734fc72158fa97d6cfb6df",
          "0x03d78a43ef4db904736b09ec8167deacf78ca14b0bcfa22d280c8db53688563a",
          "0x6c962a3376c5d50f9a6fbe71c555294bb639192aaedc6d8ff1f43c2e6c7f6255",
          "0x432d13a977ea8df24859c70f1eeebd303d0ac099d7da6df4bd7db2e2802bdeb1",
        ],
        "transactionsRoot": "0xc103e60e253c07da5e7666463768a0029d50721bfcc06ce51d868c07caf5f4cc",
        "uncles": [],
        "withdrawals": [
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x12761ee",
            "index": "0x4e822fb",
            "validatorIndex": "0x2f2b3",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x127530f",
            "index": "0x4e822fc",
            "validatorIndex": "0x2f2b4",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x127b3a1",
            "index": "0x4e822fd",
            "validatorIndex": "0x2f2b5",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x126d432",
            "index": "0x4e822fe",
            "validatorIndex": "0x2f2b6",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1271a9d",
            "index": "0x4e822ff",
            "validatorIndex": "0x2f2b7",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x12704a9",
            "index": "0x4e82300",
            "validatorIndex": "0x2f2b8",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x126c493",
            "index": "0x4e82301",
            "validatorIndex": "0x2f2b9",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x12785a7",
            "index": "0x4e82302",
            "validatorIndex": "0x2f2ba",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1271a3d",
            "index": "0x4e82303",
            "validatorIndex": "0x2f2bb",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1276002",
            "index": "0x4e82304",
            "validatorIndex": "0x2f2bc",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x126f825",
            "index": "0x4e82305",
            "validatorIndex": "0x2f2bd",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1275945",
            "index": "0x4e82306",
            "validatorIndex": "0x2f2be",
          },
          {
            "address": "0xcaf3b970b4596391cf74a1fa833d0c9edd71470c",
            "amount": "0x1270e42",
            "index": "0x4e82307",
            "validatorIndex": "0x2f2bf",
          },
          {
            "address": "0xa9290b61d99562a213428d2d972420acd0077c21",
            "amount": "0x1270989",
            "index": "0x4e82308",
            "validatorIndex": "0x2f2c0",
          },
          {
            "address": "0xa9290b61d99562a213428d2d972420acd0077c21",
            "amount": "0x12757f2",
            "index": "0x4e82309",
            "validatorIndex": "0x2f2c1",
          },
          {
            "address": "0xa9290b61d99562a213428d2d972420acd0077c21",
            "amount": "0x1276b9f",
            "index": "0x4e8230a",
            "validatorIndex": "0x2f2c2",
          },
        ],
        "withdrawalsRoot": "0x33747cc6d2692bffa01c25aab8323b628778f1e9456cfacea32efb81a17c445a",
      }
    `)
  })

  test('args: includeTransactions', async () => {
    const block = await getBlock(client, {
      blockNumber: anvilMainnet.forkBlockNumber,
      includeTransactions: true,
    })
    expect(typeof block.transactions[0] === 'object').toBe(true)
  })
})

test('non-existent block: throws if block number does not exist', async () => {
  await expect(
    getBlock(client, {
      blockNumber: 69420694206942n,
    }),
  ).rejects.toMatchInlineSnapshot(`
    [BlockNotFoundError: Block at number "69420694206942" could not be found.

    Version: viem@x.y.z]
  `)
})

test('non-existent block: throws if block hash does not exist', async () => {
  await expect(
    getBlock(client, {
      blockHash:
        '0xd4a8cf1bf4d05f44480ae4a513d09cddb273880ed249168bf2c523ee9e5c7722',
    }),
  ).rejects.toMatchInlineSnapshot(`
    [BlockNotFoundError: Block at hash "0xd4a8cf1bf4d05f44480ae4a513d09cddb273880ed249168bf2c523ee9e5c7722" could not be found.

    Version: viem@x.y.z]
  `)
})
