---
description: Request permissions from a wallet to perform actions on behalf of a user.
---

# requestExecutionPermissions

Request permissions from a wallet to perform actions on behalf of a user.

[Read more.](https://eips.ethereum.org/EIPS/eip-7715)

:::warning[Warning]
This is an experimental action that is not supported in most wallets. It is recommended to have a fallback mechanism if using this in production.
:::

## Usage

:::code-group

```ts twoslash [example.ts]
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{ // [!code focus:11]
  chainId: mainnet.id,
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  permission: {
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
}])
```

```ts twoslash [config.ts]
import { createWalletClient, custom } from 'viem'
import { mainnet } from 'viem/chains'
import { erc7715Actions } from 'viem/experimental'

export const walletClient = createWalletClient({
  chain: mainnet,
  transport: custom(window.ethereum!),
}).extend(erc7715Actions())
```

:::

## Returns

`RequestExecutionPermissionsReturnType[]`

Response from the wallet after issuing permissions.

### Example Response

```ts
[
  {
    chainId: 1,
    to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
    from: '0x70997970C51812dc3A010C7d01b50e0d17dc79C8',
    permission: {
      type: 'native-token-allowance',
      isAdjustmentAllowed: false,
      data: {
        allowance: '0x1DCD6500',
      },
    },
    rules: [
      {
        type: 'expiry',
        data: {
          timestamp: 1716846083,
        },
      },
    ],
    context: '0xdeadbeef',
    dependencies: [],
    delegationManager: '0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3',
  }
]
```


## Parameters

### chainId

- **Type:** `number`

The chain ID on which the permission is being requested.

```ts twoslash
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{
  chainId: mainnet.id, // [!code focus]
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  permission: {
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
}])
```

### to

- **Type:** `Address`

The address that will receive the permission to execute on behalf of the user.

```ts twoslash
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{
  chainId: mainnet.id,
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266', // [!code focus]
  permission: {
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
}])
```

### permission

- **Type:** `Permission`

Permission to request from the user. 

```ts twoslash
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{
  chainId: mainnet.id,
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  permission: { // [!code focus:7]
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
}])
```

### from (optional)

- **Type:** `Address | undefined`

Address that will grant the permission. If `undefined`, the connected address is used as a default. 

```ts twoslash
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{
  chainId: mainnet.id,
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  from: '0x70997970C51812dc3A010C7d01b50e0d17dc79C8', // [!code focus]
  permission: {
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
}])
```

### rules (optional)

- **Type:** `Rule[] | undefined`

Set of rules to apply to the permission.

```ts twoslash
import { mainnet } from 'viem/chains'
import { walletClient } from './config'
 
const result = await walletClient.requestExecutionPermissions([{
  chainId: mainnet.id,
  to: '0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266',
  permission: {
    type: 'native-token-allowance',
    isAdjustmentAllowed: false,
    data: {
      allowance: '0x1DCD6500',
    },
  },
  rules: [ // [!code focus:8]
    {
      type: 'expiry',
      data: {
        timestamp: 1716846083,
      },
    },
  ],
}])
```
